/* empty css             */(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function o(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(t){if(t.ep)return;t.ep=!0;const r=o(t);fetch(t.href,r)}})();const n={items:[{id:"coffee-001",title:"Эфиопская арабика — утренняя симфония",description:"Нежный цветочный аромат с нотами бергамота и жасмина. Идеален для приготовления в турке или френч‑прессе. Отборные зёрна ручной сборки из высокогорных регионов Эфиопии.",image:"/images/coffee-001.jpg",compound:"100% арабика, Эфиопия, регион Иргачефф, натуральная обработка, средняя обжарка",price:234,category:"новинка"},{id:"coffee-002",title:"Коста-Рика Тарразу — баланс совершенства",description:"Сбалансированный вкус с оттенками миндаля, карамели и красного яблока. Средняя кислотность, гладкое послевкусие. Подходит для эспрессо и альтернативных методов заваривания.",image:"/images/coffee-002.jpg",compound:"100% арабика, Коста-Рика, регион Тарразу, мытая обработка, средняя обжарка",price:328,category:"популярный напиток"},{id:"coffee-003",title:"Бразильский сантос — классика жанра",description:"Мягкий, округлый вкус с нотами шоколада и орехов. Низкая кислотность, плотное тело. Идеальный выбор для любителей традиционного кофе.",image:"/images/coffee-003.jpg",compound:"100% арабика, Бразилия, регион Сантос, натуральная обработка, средняя обжарка",price:230,category:"хит продаж"},{id:"coffee-004",title:"Колумбийский эксельсо — фруктовая фантазия",description:"Яркий фруктовый профиль с нотами спелой груши и цитрусовых. Средняя кислотность, долгое послевкусие. Отлично раскрывается в капельной кофеварке.",image:"/images/coffee-004.jpg",compound:"100% арабика, Колумбия, регион Антиокия, мытая обработка, светлая обжарка",price:234,category:"новинка"},{id:"coffee-005",title:"Индонезийская суматра — загадочное послевкусие",description:"Глубокий, насыщенный вкус с землистыми нотами и оттенками тёмного шоколада. Низкая кислотность, тяжёлое тело. Для ценителей необычных кофейных профилей.",image:"/images/coffee-005.jpg",compound:"100% арабика, Индонезия, остров Суматра, полумытая обработка, тёмная обжарка",price:220,category:"новинка"},{id:"coffee-006",title:"Кенийский АА — взрыв яркости",description:"Интенсивная кислотность с яркими нотами чёрной смородины и грейпфрута. Сложная ароматика, долгое ягодное послевкусие. Превосходно в пуровере.",image:"/images/coffee-006.jpg",compound:"100% арабика, Кения, классификация АА, мытая обработка, светлая обжарка",price:180,category:"хит продаж"},{id:"coffee-007",title:"Гватемальский антигуа — гармония тела",description:"Полнотелый кофе с нотами какао, специй и лёгкой цитрусовой кислинкой. Идеален для эспрессо. Традиционная вулканическая почва придаёт особый характер.",image:"/images/coffee-007.jpg",compound:"100% арабика, Гватемала, регион Антигуа, мытая обработка, средняя обжарка",price:240,category:"новинка"},{id:"coffee-008",title:"Ямайский блю маунтин — роскошь острова",description:"Исключительно мягкий, сбалансированный вкус с нотами орехов, ванили и тропических фруктов. Редкий и престижный сорт с высокогорных плантаций.",image:"/images/coffee-008.jpg",compound:"100% арабика, Ямайка, Голубой хребет, мытая обработка, средняя обжарка",price:149,category:"популярный напиток"},{id:"coffee-009",title:"Вьетнамский робуста — мощь и энергия",description:"Крепкий, насыщенный кофе с высокой горчинкой и нотами тёмного шоколада. Высокое содержание кофеина. Идеален для эспрессо-смесей.",image:"/images/coffee-009.jpg",compound:"100% робуста, Вьетнам, центральная высокогорная область, натуральная обработка, тёмная обжарка",price:232,category:"новинка"},{id:"coffee-010",title:"Панамский гейша — кофейный бриллиант",description:"Изысканный, сложный профиль с нотами жасмина, личи и бергамота. Невероятно чистое послевкусие. Один из самых премиальных сортов в мире.",image:"/images/coffee-0010.jpg",compound:"100% арабика гейша, Панама, регион Бокете, мытая обработка, светлая обжарка",price:420,category:"новинка"},{id:"coffee-011",title:"Перуанский органический — чистота природы",description:"Мягкий, чистый вкус с нотами миндаля и карамельной сладости. Сертифицированный органический кофе. Отлично подходит для фильтра.",image:"/images/coffee-0011.jpg",compound:"100% арабика, Перу, регион Чанчамайо, органическая сертификация, средняя обжарка",price:320,category:"популярный напиток"},{id:"coffee-012",title:"Танзанийский мбея — тропический восторг",description:"Фруктовый профиль с нотами манго, папайи и лёгкой цветочной ароматикой. Средняя кислотность, сочное тело. Прекрасно в аэропрессе.",image:"/images/coffee-0012.jpg",compound:"100% арабика, Танзания, регион Мбея, мытая обработка, светлая обжарка",price:435,category:"популярный напиток"},{id:"coffee-013",title:"Гавайский Кона — островной шарм",description:"Элегантный, сбалансированный кофе с нотами орехов макадамия, карамели и лёгкой цитрусовой кислинкой. Редкий сорт с Гавайских островов.",image:"/images/coffee-0013.jpg",compound:"100% арабика Кона, Гавайи, США, мытая обработка, средняя обжарка",price:295,category:"хит продаж"},{id:"coffee-014",title:"Никарагуанский марагоджип — гигант вкуса",description:"Крупные зёрна придают насыщенный, полнотелый вкус с нотами какао и специй. Низкая кислотность, долгое шоколадное послевкусие.",image:"/images/coffee-0014.jpg",compound:"100% арабика марагоджип, Никарагуа, мытая обработка, средняя обжарка",price:134,category:"популярный напиток"},{id:"coffee-015",title:"Йеменский матари — древний аромат",description:"Глубокий, сложный вкус с нотами сухофруктов, специй и дымными оттенками. Один из старейших кофейных сортов мира. Идеально в джезве.",image:"/images/coffee-0015.jpg",compound:"100% арабика, Йемен, регион Матари, натуральная обработка, средняя обжарка",price:210,category:"новинка"},{id:"coffee-016",title:"Индийский муссон малабар — морской характер",description:"Уникальный профиль с нотами специй, древесины и лёгкой солоноватости. Зёрна подвергаются особой «муссонной» обработке у морского побережья. Идеально для френч‑пресса.",image:"/images/coffee-0016.jpg",compound:"100% арабика, Индия, Малабарское побережье, муссонная обработка, тёмная обжарка",price:130,category:"хит продаж"},{id:"coffee-017",title:"Сальвадорский пакамара — экзотическая сладость",description:"Яркий вкус с нотами тропических фруктов, мёда и цветочной ароматикой. Средняя кислотность, долгое медовое послевкусие. Превосходно в пуровере.",image:"/images/coffee-0017.jpg",compound:"100% арабика пакамара, Сальвадор, мытая обработка, светлая обжарка",price:140,category:"популярный напиток"},{id:"coffee-018",title:"Танзанийский арабика — горный бриз",description:"Свежий, чистый вкус с цитрусовыми нотами и лёгкой ягодной кислинкой. Лёгкое тело, освежающее послевкусие. Отличный выбор для холодного заваривания.",image:"/images/coffee-0018.jpg",compound:"100% арабика, Танзания, горные регионы, мытая обработка, светлая обжарка",price:120,category:"хит продаж"},{id:"coffee-019",title:"Бразильский можиана — мягкий баланс",description:"Нежный, округлый вкус с нотами орехов и какао. Низкая кислотность, гладкое послевкусие. Универсальный сорт для любых способов заваривания.",image:"/images/coffee-0019.jpg",compound:"100% арабика, Бразилия, регион Можиана, натуральная обработка, средняя обжарка",price:250,category:"хит продаж"},{id:"coffee-020",title:"Гондурасский сан-маркос — тёплый комфорт",description:"Сбалансированный кофе с мягкими нотами молочного шоколада и карамельной сладости. Средняя кислотность, округлое тело. Отлично подходит для утреннего ритуала.",image:"/images/coffee-0020.jpg",compound:"100% арабика, Гондурас, регион Сан-Маркос, мытая обработка, средняя обжарка",price:230,category:"хит продаж"}]};class u{cardList=[];getItems(){return this.cardList}addItem(e){this.cardList.push(e)}removeItem(e){this.cardList=this.cardList.filter(o=>o.id!==e)}clear(){this.cardList=[]}getTotalPrice(){return this.cardList.reduce((e,o)=>e+(o.price??0),0)}getItemCount(){return this.cardList.length}hasItem(e){return this.cardList.some(o=>o.id===e)}}class h{data={payment:"card",phone:"",email:""};setPayment(e){this.data.payment=e}setEmail(e){this.data.email=e}setPhone(e){this.data.phone=e}setData(e){Object.assign(this.data,e)}getData(){return{...this.data}}clearData(){this.data={payment:"card",email:"",phone:""}}validate(){const e={};return this.data.payment||(e.payment="Выберите вид оплаты"),this.data.email||(e.email="Укажите email"),this.data.phone||(e.phone="Укажите номер телефона"),e}}class y{productsList=[];selectedProduct=null;setItems(e){this.productsList=e}getProducts(){return this.productsList}getProductById(e){return this.productsList.find(o=>o.id===e)||null}setSelectedProduct(e){this.selectedProduct=e}getSelectedProduct(){return this.selectedProduct}}class E{validate(e){if(!e||typeof e!="string")return!1;const o=e.trim();return o.length>=2&&o.length<=30}getError(){return"Имя должно быть от 2 до 30 символов"}}class v{regex=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;validate(e){return!e||typeof e!="string"?!1:this.regex.test(e.trim())}getError(){return"Введите корректный email (например: user@example.com)"}}class j{regex=/^\+?[\d\s\-\(\)]{10,15}$/;validate(e){if(!e||typeof e!="string")return!1;const o=e.replace(/\s+/g,"");return o.length<10||o.length>15||!/^[\+\d\-\(\)]+$/.test(o)?!1:this.regex.test(e)}getError(){return"Номер должен содержать 10–15 цифр, можно с +, -, ()"}}class L{validate(e){return e===!0}getError(){return"Требуется согласие на обработку данных"}}class I{nameValidator=new E;emailValidator=new v;phoneValidator=new j;consentValidator=new L;validate(e){const o={};return this.nameValidator.validate(e.name)||(o.name=this.nameValidator.getError()),this.emailValidator.validate(e.email)||(o.email=this.emailValidator.getError()),this.phoneValidator.validate(e.phone)||(o.phone=this.phoneValidator.getError()),this.consentValidator.validate(e.consent)||(o.consent=this.consentValidator.getError()),{isValid:Object.keys(o).length===0,errors:o}}}const p=new y;p.setItems(n.items);console.log("Массив товаров из каталога: ",p.getProducts());const g=new h;g.setEmail("example@example.com");g.setPhone("123-456-7890");g.setPayment("card");console.log("Данные покупателя: ",g.getData());const P=g.validate();console.log("Ошибки валидации: ",P);const d=new u;d.addItem(n.items[0]);console.log("Массив товаров из корзины: ",d.getItems());d.removeItem(n.items[0].id);console.log("Корзина после удаления товара: ",d.getItems());console.log("Количество товаров в корзине: ",d.getItemCount());const _=d.hasItem(n.items[0].id);console.log(`Товар с ID ${n.items[0].id} в корзине:`,_);document.addEventListener("DOMContentLoaded",()=>{const c=document.getElementById("gallery");if(!c){console.error("Контейнер #gallery не найден");return}const e=i=>{const t=document.getElementById(i);return t?t.content.cloneNode(!0):(console.error(`Шаблон #${i} не найден`),null)},o=i=>{const t=e("card-catalog");if(!t)return;const r=t.querySelector(".card");if(!r){console.error("Элемент .card не найден в шаблоне");return}[".card__title",".card__price",".card__description",".card__compound"].forEach(f=>{const m=r.querySelector(f);if(m)switch(f){case".card__title":m.textContent=i.title;break;case".card__price":m.textContent=`${i.price} ₽`;break;case".card__description":m.textContent=i.description;break;case".card__compound":m.textContent=i.compound;break}});const a=r.querySelector(".card__image");a&&(a.src=i.image,a.alt=i.title);const l=r.querySelector(".card__category");l&&i.category&&(l.textContent=i.category),r.querySelector(".card__button")?.addEventListener("click",()=>{console.log("Товар добавлен в корзину:",i.id)}),c.appendChild(r)};if(n.items.length===0){console.warn("Список товаров пуст!");return}n.items.forEach(o)});document.addEventListener("DOMContentLoaded",()=>{const c=document.getElementById("subscribeForm"),e=document.querySelectorAll(".error-message"),o=()=>{e.forEach(t=>{t.textContent=""})},i=t=>{Object.keys(t).forEach(r=>{const a=document.querySelector(`.error-message[data-for="${r}"]`);a&&(a.textContent=t[r])})};c.addEventListener("submit",t=>{t.preventDefault(),o();const r={name:document.getElementById("name").value,email:document.getElementById("email").value,phone:document.getElementById("phone").value,consent:document.getElementById("consent").checked};try{const l=new I().validate(r);l.isValid?fetch("http://localhost:3000/api/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then(s=>{if(!s.ok)throw new Error(`HTTP ошибка! Статус: ${s.status}`);return s.json()}).then(s=>{alert(`Подписка оформлена! Статус: ${s.message}`),c.reset()}).catch(s=>{console.error("Ошибка запроса:",s),s.message.includes("HTTP")?alert("Ошибка сервера: "+s.message):alert("Сетевая ошибка. Проверьте подключение к серверу.")}):i(l.errors)}catch(a){console.error("Ошибка валидации:",a),alert("Ошибка валидации формы. Проверьте данные.")}})});
